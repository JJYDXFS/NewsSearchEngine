# NewsSearchEngine —— 105℃ 新闻搜索引擎
create index for news document and provide a simple search interface

## 建立倒排索引

语料库：Sogou 17900条 中文新闻文本

文档从1开始重命名，对应DocID

### 0. 预处理

替换特殊字符/分词/去停词等等

### 1. 基于内存

倒排索引文件 invert_table.npy 以字典形式保存倒排记录

词项表 word_table.npy 以字典形式保存idf值

### 2. 基于磁盘

分块处理

## 布尔检索

定义 AND OR ANDNOT 三种运算

运算符优先级表格

| op1/op2 | (    | )    | AND  | OR   | ANDNOT |
| ------- | ---- | ---- | ---- | ---- | ------ |
| (       | <    | =    | <    | <    | <      |
| )       | !    | >    | >    | >    | >      |
| AND     | <    | >    | >    | >    | >      |
| OR      | <    | >    | <    | >    | <      |
| ANDNOT  | <    | >    | >    | >    | >      |

中缀表达式转后缀，基于中间结果运算，栈空得结果

> input1: '孩子' 'AND' '教育'
>
> input2: '学生' ANDNOT '孩子'

## TF-IDF排序

tf与idf值在建立倒排索引时已经处理过，此处直接使。tf值计算如公式1，idf值计算如公式2，文档的相关度计算如公式3
$$
tf_{i,j}=\frac{n_{i,j}}{\sum_{k}n_{k,j}} \, \tag{1}
$$
$$
n_{i,j}表示词项i在文档j中出现次数 \\
k表示文档j中的词项总数
$$

$$
idf_{i}=\ln{\frac{|D|}{|{j:t_i}\in{d_j}|+1}} \, \tag{2}
$$
$$
|D|表示文档总数 \\
|j|表示含有词项t_i的文档d_j的总数\\
|j|+1是为了保证分母不为零
$$

$$
tfidf=\sum_{i=1}^{n}tf_i*idf_i \, \tag{3}
$$
## 人机检索界面

### 前端

- 实现翻页


- 采用前后端半分离的数据传输形式


- flask实现动态路由


### 后端

接 布尔检索 和 TF-IDF排序 算法，并负责生成动态页面所需数据

### MySQL数据库

为了提供检索结果摘要，把每篇文档的前65字符存在数据库中，方便后端取数据

## 说在后面的话

时间紧，前端页面写得很拉😅 css/js都挤一个页面里了，函数也写得稀碎，有机会再调整（ Maybe 也没有机会了